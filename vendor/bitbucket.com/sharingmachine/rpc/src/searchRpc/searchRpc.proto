syntax = "proto3";

option java_multiple_files = true;
option java_package = "io.kwk.service.search";
option java_outer_classname = "SearchRpc";

package searchRpc;

service SearchRpc {
    rpc Alpha (AlphaRequest) returns (AlphaResponse) {}
}

message AlphaRequest {
    string term = 1;
    string extension = 2;
    string username = 3;
    bool all = 4; // Search snippets with any role.
    bool global = 5; // Search everyones snippets.
}

message AlphaResponse {
    repeated AlphaResult results = 1;
    int64 total = 2;
    int64 took = 3;
}

message AlphaResult {
    string snipId = 1;
    string username = 2;
    string name = 3;
    string fullName = 4;
    string pouchName = 18;
    string pouchId = 19;
    string extension = 5;
    string snip = 6;
    int64 snipVersion = 7;
    int64 created = 8;
    repeated string tags = 9;
    map<string, string> highlights = 10;
    string clonedFromFullName = 11;
    int64 clonedFromVersion = 12;
    int64 runCount = 13;
    int64 cloneCount = 14;
    string description = 15;
    bool private = 16;
    Role role = 17;
}

enum Role {
    Standard = 0;
    Preferences = 1;
    Environment = 2;
    Message = 3;
}